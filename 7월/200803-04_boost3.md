### 네이버_부스트코스_3

## 화면 전환하기

1. 화면 구성과 화면 간 전환

<img src="https://github.com/OneLine-IF/TestLab/issues/2#issuecomment-667897186">

1. MainActivity.java
```Java
package com.example.intent;

import androidx.annotation.Nullable;
import androidx.appcompat.app.AppCompatActivity;

import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

public class MainActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        // xml 파일을 인플레이션한 것 -> 위젯과 같은 것들을 메모리 객체화!
        Button button = (Button) findViewById(R.id.button);
        button.setOnClickListener(new View.OnClickListener() {
            // 버튼을 눌렀을 때, onClick 안에 있는 코드들이 실행된다.
            @Override
            public void onClick(View view) {
                Intent intent = new Intent(getApplicationContext(), MenuActivity.class);
                // 메뉴 화면을 띄우고 싶다고 시스템 쪽에 알려줘야! 그것이 인텐트 활용하는 것!
                startActivityForResult(intent, 101);
                // 시스템 쪽으로 보내고 다시 메인 화면으로 돌아오기 위한 코드 설정

            }
        });
    }
    // 응답을 받을 메서드 정의
    @Override
    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        if (requestCode == 101) {// 메뉴 화면에서 넘긴 코드인지 확인
            String name = data.getStringExtra("name");
            Toast.makeText(getApplicationContext(),"메뉴화면으로부터 응답 : " + name, Toast.LENGTH_LONG).show();
            
        }

    }
}
```

1. MenuActivity.java
```Java
package com.example.intent;

import androidx.appcompat.app.AppCompatActivity;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class MenuActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_menu);

        Button button2 = (Button) findViewById(R.id.button2);
        button2.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                // 메뉴 화면에서 메인 화면으로 데이터를 전달하고 싶다면? 또, intent 활용
                Intent intent = new Intent();
                intent.putExtra("name","mike"); // 시스템에서 인텐트를 받았다고 하더라도 Extra data는 해석하지 않음
                // 그냥 통과시켜버리기에 MainActivity로 전달됨
                setResult(Activity.RESULT_OK,intent);

                finish(); // 메뉴 화면을 없앤다. 왜냐하면 메뉴 화면이 두번쨰로 실행된 것이라
                // 메인 화면이 아래 깔려 있기 때문에 이 화면을 취소하면 메인 화면으로 돌아가는 것
            }
        });
    }
}
```

1.AndroidManifest.xml
```Java
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.intent">

    <application
        android:allowBackup="true"
        android:icon="@mipmap/ic_launcher"
        android:label="@string/app_name"
        android:roundIcon="@mipmap/ic_launcher_round"
        android:supportsRtl="true"
        android:theme="@style/AppTheme">
        <activity android:name=".MenuActivity"
            android:label="메뉴"
            android:theme="@style/Theme.AppCompat.Light.Dialog"></activity>
        <activity android:name=".MainActivity">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest>
```

<img src="https://github.com/OneLine-IF/TestLab/issues/2#issuecomment-667897293">

<img src="https://github.com/OneLine-IF/TestLab/issues/2#issuecomment-667897628">

<img src="https://github.com/OneLine-IF/TestLab/issues/2
#issuecomment-667897791
">

- 애플리케이션 구성요소 중의 하나를 만들어 프로젝트에 추가하면 시스템이 이것들을 다루게 되는 거죠. 따라서 새로 추가한 구성요소는 시스템이 알고 있어야 합니다.

- 매니페스트(AndroidManifest.xml) 파일에 어떤 구성요소가 추가되었는지를 넣어두면 앱이 설치될 때 시스템이 이 파일을 보고 구성요소를 확인. 반드시 매니페스트 파일에 그 정보를 넣어주어야 합니다.

- 새로운 액티비티를 실행한 후에 다시 원래의 액티비티로 돌아가고 싶다면 단순히 finish 메소드를 호출하기만 하면 됩니다. 왜냐하면, 어플리케이션에서 실행되는 액티비티는 안드로이드 태스크(Android Task)에서 스택(Activity Stack)형태로 관리되며 이때 순서는 각 액티비티가 열린 순서와 같기 때문입니다.

## 인텐트 살펴보기

1. 인텐트

<img src="https://github.com/OneLine-IF/TestLab/issues/2#issuecomment-667898084">

<img src="https://github.com/OneLine-IF/TestLab/issues/2#issuecomment-667898321">

<img src="https://github.com/OneLine-IF/TestLab/issues/2#issuecomment-667898444">

1. MainActivity.java
```Java
package com.example.callintent;

import androidx.appcompat.app.AppCompatActivity;
import androidx.core.view.KeyEventDispatcher;

import android.content.ComponentName;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class MainActivity extends AppCompatActivity {
    EditText editText;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        editText = (EditText) findViewById(R.id.editText);

        Button button = (Button) findViewById(R.id.button);
        button.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                String receiver = editText.getText().toString();
                Intent intent = new Intent(Intent.ACTION_DIAL, Uri.parse("tel:" + receiver));
                startActivity(intent);

                /* 이런 식으로 지정해줄 수도 있다.
                Intent intent2 = new Intent();
                ComponentName name = new ComponentName("com.example.callintent", "com.example.callintent.MenuActivity");
                intent2.setComponent(name);
                startActivity(intent2);
                 */
            }
        });
    }
}
```

- 인텐트는 시스템으로 전달되는 일종의 명령을 담고 있는 객체. 시스템이 이해할 수 있는 객체를 하나 만들어둔 것.

- 인텐트 안에 들어가는 정보 중에서 가장 중요한 것은 액션 정보. 전화걸기를 시스템에 요청할 때는 ACTION_VIEW나 ACTION_DIAL 액션을 넣어줄 수 있는데 이렇게 하면 시스템에서 어떤 동작을 원하는지 이해.

```Java
Intent intent = new Intent(Intent.ACTION_DIAL, Uri.parse("tel:01010001000")); 
startActivity(intent);
```

- 이전 시간에 만들었던 메뉴 액티비티를 띄우고 싶다면 MenuActivity.class 라는 클래스 인스턴스를 인텐트의 파라미터로 넘겨주는 방법과 그 외에도 ComponentName 객체를 만들어 설정하는 방법이 있습니다.

```Java
Intent intent = new Intent();

ComponentName name = new ComponentName("org.techtown.intent",
                                                      "org.techtown.intent.MenuActivity");

intent.setComponent(name);          
startActivityForResult(intent, 101);
```

- 실행하고 싶은 액티비티를 문자열로만 지정할 수 있어서 동적으로 액티비티를 지정해주고 싶을 때 사용

<img src="https://github.com/OneLine-IF/TestLab/issues/2#issuecomment-667898552">

<img src="https://github.com/OneLine-IF/TestLab/issues/2#issuecomment-667898655">

1. 부가데이터

    - 액티비티를 시스템으로 전달하여 실행시킬 때 인텐트가 사용
    - 시스템에서 이해할 수 있는 객체로 만든 것이 인텐트인데, 이 인텐트 안에는 여러 가지 정보가 들어갈 수 있습니다.
    - 인텐트에 설정하는 플래그에 대해 알아보고, 인텐트에 부가데이터로 넣어 전달하는 Parcelable에 대해서도 알아봅시다.
    - 플래그: 인텐트에 추가할 수 있는 옵션

1. 액티비티 플래그 사용 예
```Java
Intent intent = new Intent(getBaseContext(),AnotherActivity.class); // 인텐트 객체 생성 
intent.putExtra("startCount",String.valueOf(startCount)); // 부가 데이터 넣기
intent.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP); // 인텐트 플래그 설정
startActivityForResult(intent, REQUEST_CODE_ANOTHER); // 인텐트 띄우기
```

<img src="https://github.com/OneLine-IF/TestLab/issues/2#issuecomment-668392366">

<img src="https://github.com/OneLine-IF/TestLab/issues/2#issuecomment-668393111">

<img src="https://github.com/OneLine-IF/TestLab/issues/2#issuecomment-668393284">

- 인텐트가 메뉴 액티비티까지 전달되므로 메뉴 액티비티에서는 전달받은 인텐트 안에 들어있는 데이터를 꺼내어 사용
- 인텐트는 시스템을 통해 다른 액티비티로 전달될 수 있는데 액티비티뿐만 아니라 다른 애플리케이션 구성요소로도 전달될 수 있습니다.
- 부가 데이터는 시스템에서 건드리지 않고 전달만 되며 인텐트 안에 번들(Bundle) 객체가 들어가 있어 그 안에 데이터를 넣을 때는 put …, 문자열을 가져올 때는 get … 메소드를 사용

<img src="https://github.com/OneLine-IF/TestLab/issues/2#issuecomment-668393314">

1. 액티비티 A에서 액티비티 B를 실행하고 다시 액티비티 A로 돌아오는 과정

- 액티비티 A에서는 인텐트 객체를 만들고 put … 메소드를 이용해 부가데이터를 넣어줍니다.
- 그리고 startActivityForResult 메소드를 호출합니다.
- 액티비티 B가 실행된 후 setResult 메소드를 호출하면서 인텐트를 전달하고 finish 메소드를 호출하면 액티비티 A로 돌아옵니다.
- 액티비티 B에서도 인텐트 안에 부가데이터를 넣어 전달할 수 있는데 이 인텐트는 액티비티 A의 onActivityResult 메소드가 호출되면서 전달받을 수 있습니다.

1. Serializable 과 Parcelable

- ArrayList와 같은 객체들은 이미 Serializable 인터페이스를 구현하고 있으므로 그대로 부가데이터로 추가할 수 있으며, 그 외에 Person과 같이 직접 정의하는 객체들은 Parcelable 인터페이스를 구현한 후 부가데이터로 추가하는 것을 권장

<img src="https://github.com/OneLine-IF/TestLab/issues/2#issuecomment-668394229">

1. MainActivity.java
```Java
package com.example.parcelable;

import androidx.appcompat.app.AppCompatActivity;

import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

import java.util.ArrayList;

public class MainActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Button button = (Button) findViewById(R.id.button);
        button.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                Intent intent = new Intent(getApplicationContext(), MenuActivity.class);
                // 여기세 엑스트라 데이터를 넣어주겠다는
                ArrayList<String> names = new ArrayList<String>();
                names.add("김진수");
                names.add("황수연");

                intent.putExtra("names", names);

                SimpleData data = new SimpleData(100, "Hello");
                intent.putExtra("data", data);

                startActivityForResult(intent, 101);

            }
        });
    }
}
```

1. MenuActivity.java
```Java
package com.example.parcelable;

import androidx.appcompat.app.AppCompatActivity;

import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

import java.util.ArrayList;

public class MenuActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_menu);

        Button button2 = (Button) findViewById(R.id.button2);
        button2.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                finish();
            }
        });

        Intent passedIntent = getIntent();
        processIntent(passedIntent);
    }

    private void processIntent(Intent intent){
        if(intent != null) {
            ArrayList<String> names = (ArrayList<String>) intent.getSerializableExtra("names");
            if(names != null) {
                Toast.makeText(getApplicationContext(), "전달받은 이름 리스트 갯수 : " + names.size(), Toast.LENGTH_LONG).show();
            }

            SimpleData data = (SimpleData) intent.getParcelableExtra("data");
            if(data != null) {
                Toast.makeText(getApplicationContext(), "전달받은 SimpleData : " + data.message, Toast.LENGTH_LONG).show();
            }
        }
    }
}
```

1. SimpleData.java
```Java
package com.example.parcelable;

import android.os.Parcel;
import android.os.Parcelable;
import android.security.identity.IdentityCredentialStore;

public class SimpleData implements Parcelable {

    int number;
    String message;

    public SimpleData(int number, String message) {// 생성자 만들어주기
        this.number = number;
        this.message = message;
    }

    public SimpleData(Parcel src) {// 이것도 마찬가지로 생성자, Parcel 데이터를 받았을 경우
        number = src.readInt();
        message = src.readString();
    }

    public static final Parcelable.Creator CREATOR = new Parcelable.Creator() {
        // 바로 객체를 만들면서 할당해주는 형태
        public SimpleData createFromParcel (Parcel src) {
            return new SimpleData(src);
        }

        public SimpleData[] newArray(int size) {
            return new SimpleData[size];
        }
    };

    @Override
    public int describeContents() {
        return 0;
    }

    @Override
    public void writeToParcel(Parcel parcel, int i) {// Parcel 객체로 만들어준다.
        // Parcel 이 결국에는 데이터를, 이 객체 안에 있는 데이터를 다른 데 전달할 때 사용되는 객체라고 생각
        parcel.writeInt(number);
        parcel.writeString(message);
    }
}

```
