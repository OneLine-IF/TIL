## 화면 전환하기
### 화면 구성과 화면 간 전환
- 액티비티
<img src="https://user-images.githubusercontent.com/32586985/89143967-574a2680-d587-11ea-912d-bc51cac80103.PNG">

- 액티비티는 화면을 나타내는 것, 서비스는 화면이 없는 것이고 뭔가 기능이 동작하는 것
- 브로드캐스트 수신자는 문자를 받았을 경우를 생각하면 그 문자를 받고 내부에서 받을 사람을 받게끔 던지는 것이 브로드캐스팅이라고 하고 던져주는 것들을 받아서 처리하는 것을 브로드캐스트 수신자라고 함
- 내용 제공자는 사진을 찍었을 경우, 앨범에 있는 사진을 보안 때문에 그대로 쓸 수 없는데 이것을 파일을 그대로 가져갈 수 없으니 내용제공자를 통해서 만들어주는 것 이를 이용해서 볼 수 있음
- 위의 네가지가 구성요소고 시스템에서 관리를 하는 것임, 앱을 설치를 해 만들면 설치하는 시점에 앱에 위의 구성요소 중 하나가 들어있는지 확인하는 과정이 있음 이것을 매니페스트라고 하는 정보를 확인함, AndroidManifest.xml 파일에 등록을 하면 그 정보를 가져다가 사용을 함
- 새로운 프로젝트 만들고 새 화면 추가
<img src="https://user-images.githubusercontent.com/32586985/89144021-8365a780-d587-11ea-97ab-90423d1a7e7c.PNG">

- 하나의 화면에서 다른 화면으로 이동을 할 때 또는 전환할 때 그런 기능을 만들때도 자바 소스코드를 사용함
- 예를 들면 로그인 화면을 처음에 하나 만든다면 로그인을 하고 나서 메뉴화면으로 들어갈 수 있는 그런 기능을 말함
- 새로운 액티비티, 새로운 화면을 만들때도 자바 소스파일 하나와 xml 레이아웃 파일 하나로 구성된다는 것을 잊으면 안됨
- 자바의 onCreate 안에 setContentView에서 xml 레이아웃 파일을 서로 연결시켜주고 있으므로 한 쌍으로 묶여있다는 걸 알 수 있음
- xml 레이아웃을 레이아웃 인플레이션을 한 것이고, 레이아웃 인플레이션은 xml 파일에 있는 버튼이라던가 이런 것들을 메모리에 객체화하는 것, 객체화한 다음에 자바 소스파일에서 얘기하는 화면에 갖다 붙이는 것
- app 폴더 → 오른쪽 마우스, New → Activity → Empty Activity, 두 개를 자동으로 만들어서 새로운 화면을 만듬
- 각각 패키지와 res, layout 하위에 새로 생성됨
- AndroidManifest.xml에도 역시 application이라는 태그에 새로운 activity가 자동으로 등록됨
- 별도로 자바, xml 파일을 별도로 추가할 수 있지만 Manifest에다가 무조건 추가를 해줘야함

- 메뉴화면 띄우기라고 하는 버튼을 동작시키기 위해서 자바 소스코드에다가 동작하는 코드를 넣어야함
	- 첫 번째는 버튼의 onClick이라는 속성으로 자바 소스코드에서 동작할 메소드 이름을 넣어주고 MainActivity.java에서 그 메소드 이름을 동일하게 만들어주면 그게 버튼을 클릭했을 때 동작이 됨
	- 두 번째는 버튼의 아이디를 기억해서 onCreate안에서 아이디를 이용해서 버튼을 찾고 버튼이 클릭했을 때 동작하도록 리스너를 등록해주면 됨, 버튼을 클릭했을 때 onClick 안에 집어넣은 코드가 실행된다고 생각하면 됨
<img src="https://user-images.githubusercontent.com/32586985/89144093-b314af80-d587-11ea-9449-21ac7de2495b.PNG">

- 위에서 MenuActivity를 띄어주기 위해서 Intent를 사용함, 시스템에서 MenuActivity, MainActivity등을 관리하는데, 즉 시스템에서 화면을 관리함, 띄어주거나 없애주는 것도 시스템이 관리를 함
- 메뉴 화면을 띄우고 싶다고 하면 시스템 쪽에 요청을 해야함, 그러면 시스템이 알 수 있는 포맷이 필요한데 그것을 Intent라고 함
- 여기서 단순히 화면을 띄어준다고 할 경우 startActivity(intent);를 사용하게 되면 intent에 있는 정보를 띄어주게 됨
- 화면을 띄어주고 나서 메뉴화면에서 다시 메인화면으로 돌아올 때 응답을 받아야 되는 경우 startActivityForResult 메소드 사용
- startActivityForResult(intent,101); 여기서 intent 뒤에다가 요청 코드를 넣는데, 요청 코드는 화면을 여러 개 띄었을 때 각각의 화면을 구분해야하는데 그 구분 하는 역할을 하는 구분자가 됨, 응답을 받을 때 어떤 화면에서 응답을 받았는지 코드를 가지고 구분할 수 있음, 코드가 마찬가지로 넘어옴

<img src="https://user-images.githubusercontent.com/32586985/89144136-d2134180-d587-11ea-9ff0-989105932db9.PNG">

- 그 다음에 해당 메뉴 파일에서 인플레이션, 메모리 객체화하는 과정을 거쳐서 파일과 파일을 서로 연결되면서 하나의 화면을 구성하게함
- 버튼 클릭시 메인화면을 보이게 하기 위해서 finish();를 사용함
- 왜 finish를 쓰냐면 첫 번째 화면을 띄우고 그 다음 화면을 띄우면 첫 번째 화면은 그 밑에 깔려있음 즉, 뒤에 깔려있음, 이것을 액티비티 스택이 관리를 함, 스택은 집어넣은대로 쌓이고 꺼낼 때 맨 마지막부터 꺼냄
- 메인화면이 스택안에 먼저 들어가고 메뉴화면이 그 다음에 들어갔으면 메뉴화면을 빼내면 메인화면만 남게 됨, 그래서 finish를 해주면 메인 화면이 다시 보임
- 하지만 여기서 메인 화면 쪽으로 데이터를 넘기고 싶다면 메뉴 화면에서 메인 화면으로 데이터를 전달할 때 시스템을 통과하기 때문에 인텐트를 사용하면 됨
- intent.putExtra 사용, 인텐트를 받아도 Extra data는 해석하지 않음, 어떤 화면을 띄우는 건 중요한 정보지만 Extra 정보는 해석하지 않고 인텐트를 그냥 통과함, 그 인텐트는 그대로 다른 액티비티, Main 액티비티로 전달됨, Extra data로 집어넣으면 다른 액티비티로 전달할 수 있는 방법이 됨
- 그리고 setResult를 해서 intent 객체를 파라미터로 전달하면 시스템 쪽으로 전달되게 되어 응답으로 전달되므로 메뉴 화면을 띄어준 메인 화면 쪽으로 전달이 됨
- 그러면 MainActivity에서 전달된 데이터를 받아서 사용할 수 있음
<img src="https://user-images.githubusercontent.com/32586985/89144311-4f3eb680-d588-11ea-895b-6785c1724752.PNG">

- 어떻게 사용하냐면 MenuActivity에서 MenuActivity가 없어지면서 인텐트로 setResult라고 하는 메소드를 이용해서 전달해줌, MenuActivity에서 응답을 받을 메소드르 하나 정의를 하고 그 메소드를 자동으로 호출하게 됨
- Generate → override method → onActivityResult를 오버라이딩함, 응답을 받아주는 메소드임
- 각각의 매개변수로 전달을 받고 전달받은 intent 안에 데이터도 확인함
- 아래의 코드와 같이 처리한다면 새로운 화면을 띄운 다음에 그 화면으로부터 응답을 받았을 때 Intent 안에 Extra로 넣고 데이터를 전달 받을 수 있는 데 전달받는 것까지 된 것임
- 화면 전환이 되고 다시 돌아갔을 때 아래와 같이 뜸
<img src="https://user-images.githubusercontent.com/32586985/89144580-1d7a1f80-d589-11ea-9fae-af72cce96933.PNG">

- 화면 전환시 MyIntent라고 써 있는데 이것을 바꾸고 싶다면 아래와 같이 AndroidManifest.xml안에서 수정할 수 있음
- MyIntent 대신 메뉴가 뜨고, theme를 설정해서 대화상자처럼 만들 수 있음, 대화상자를 직접 만들 수 있지만, Manifest 설정 정보만 추가를 해주면 대화상자처럼 뜰 수 있음
- 화면이 깨지지만 xml 레이아웃을 조정하면 됨
<img src="https://user-images.githubusercontent.com/32586985/89144635-371b6700-d589-11ea-9167-de211b32631a.PNG">

- 위의 과정이 어떻게 동작을 했는지 생각을 해보면
- 액티비티 구성 과정 정리
<img src="https://user-images.githubusercontent.com/32586985/89144669-50bcae80-d589-11ea-90aa-76bbbf011caf.PNG">

- 화면을 띄울 때 시스템으로 요청하기
<img src="https://user-images.githubusercontent.com/32586985/89144683-5dd99d80-d589-11ea-94ca-ec0c776b9857.PNG">

- 화면 구성과 화면 간 전환 과정
<img src="https://user-images.githubusercontent.com/32586985/89144703-6d58e680-d589-11ea-9579-f175e7ff1ada.PNG">

- 액티비티 전환하기
<img src="https://user-images.githubusercontent.com/32586985/89144713-7944a880-d589-11ea-86e9-d3aaa89f923a.PNG">

- 생각해보기
- 액티비티가 XML 레이아웃 파일과 소스 파일로 구성된다고 했으니 이 각각을 따로 추가할 수도 있을까요?
	- 예 따로 추가할 수도 있습니다. 단 이것이 제대로 구동되게 하기 위해선 Manifest에 직접 추가해야 하는 번거로움이 있을 수 있습니다
- 만약 그렇다면 매니페스트에는 어떻게 이 액티비티 정보를 추가해야 할까요?
	- 직접 application 태그 안에 activity를 넣어줘야 합니다
- 새로운 액티비티를 띄웠다가 다시 돌아올 때 액티비티 간에 사람 이름이나 나이와 같은 데이터를 전달할 수도 있을까요?
	- 예 Intent를 사용해서 레이아웃을 띄우게 하고 그다음에 putExtra 속성을 사용해서 값을 집어넣고 다시 돌아올 때 onActivityResult메소드에서 getExtra 속성을 이용해서 전달받은 값을 받을 수 있습니다