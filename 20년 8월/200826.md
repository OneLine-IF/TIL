## Volley 사용하기
### Volley 사용하기
- 스레드를 신경쓰지 않고 바로 처리할 수 있음
- Gradle Scripsts app에  volley 라이브러리를 추가해야함
- volley가 동작하는 매커니즘
<img src="https://user-images.githubusercontent.com/32586985/91247259-d993c800-e78c-11ea-873a-b22ab7955a25.PNG">

- Request 객체를 만들어서 요청을 보내고 응답을 받음, RequestQueue에 추가만 하면 알아서함, 그 안에 스레드를 생성하고 요청하고 응답을 받아서 메인 스레드에서 UI에 접근할 수 있도록 만들어주는 과정을 다 알아서 함
- RequestQuene는 한 번만 만들고 객체를 만들어 넣어서 사용하면 됨
- 일반적으로 애플리케이션 안에다가 넣어서 쓰는데, 새로운 클래스를 만들어서 그 안에다가 넣어서 구성하는 경우도 있음
<img src="https://user-images.githubusercontent.com/32586985/91247286-eadcd480-e78c-11ea-85a0-fba0200f8d8d.PNG">
<img src="https://user-images.githubusercontent.com/32586985/91247295-f29c7900-e78c-11ea-97e1-e01d7aedc7bb.PNG">
<img src="https://user-images.githubusercontent.com/32586985/91247311-fa5c1d80-e78c-11ea-97cb-981ef1121ce1.PNG">

- www.google.co.kr에 요청을 보냈을 때 받은 응답임
- requestQueue에서 스레드 처리를 하므로 스레드 처리를 굳이 하지 않아도 됨, 가장 단순한 형태로 만들 수 있는 것임 Volley임
- 네트워킹에서 항상 사용하는 구조와 패턴임
- Volley의 장점
	- 네트워크 요청(Request) 우선 순위를 자동으로 관리함
	- 동시에 여러 네트워크 요청을 할 수 있음
	- 요청을 할 때 Cache 적용 여부를 의식하지 않아도 됨
- 요청 큐가 내부에서 스레드를 만들고 웹서버에 요청하고 응답을 받고 나면 메인 스레드에서 결과를 처리할 수 있도록 만든 후 여러분이 설정한 리스너의 메소드를 호출함, 핸들러를 사용하지 않아도 됨

- 생각해보기
- Volley를 사용하면 HttpURLConnection을 사용할 때보다 코드 양이 얼마나 줄어드나요?
- 우선 스레드를 사용하지 않아도 되고 그에 따른 객체 생성 등의 코드량이 상당히 많이 줄어들 수 있다
- Volley를 이용해 웹서버에서 이미지를 받아볼 수도 있을까요?
- 웹서버에서 제공만 해준다면 이미지 역시 받아서 볼 수 있다

## JSON 이해하기
### JSON 이해하기
- JSON은 자바 스크립트의 객체 포맷임
<img src="https://user-images.githubusercontent.com/32586985/91247397-2aa3bc00-e78d-11ea-9f57-0678dbe31c85.PNG">

- 중괄호를 이용해서 객체를 표현, 배열은 대괄호를 이용해서 표현, 중괄호로 표현되는 객체 안에는 : 으로 구된 속성이 들어감, 속성의 키와 밸류로 구성이 됨, 속성의 이름과 값이 됨, 각각의 속성은 ,로 구분이 됨
- 실제 서버 쪽에서 Node.js 같은 거를 쓰게 되면 JSON 데이터를 받아서 그대로 자바스크립트 객체로 바꿀 수 있음
- 서버에서 응답을 받으면 자바스크립트 객체로 바꿔서 바로 사용할 수 있음
- 웹 서버에서 전송을 해주는 데이터 포맷을 JSON을 많이 쓰고 상당히 많은 부분이 통일되어 있음
- JSON 문자열 데이터를 자바 객체로 바꿔주는 라이브러리를 쓰면 상당히 편한데 그것을 GSON이라는 라이브러리가 많이 씀

- 요청을 보내면 접속하려는 사이트 내부의 객체들이 넘어옴 이전에 썼던 Volley를 통해서 받아올 수 있음 이것을 변환하는 작업이 필요한 것인데 이때 GSON을 씀
- 우선 객체화를 위해서 자바 클래스를 만들고 그 안에 속성값을 넣어주면 됨, 속성의 이름이 변수명이 되게끔 설정, 값의 타입을 변수의 타입으로 만듬 
- 중괄호가 객체이므로 하나의 클래스만으로 안되면 또다른 객체 또다른 클래스를 만들어줘야함
- 있는 그대로 중괄호는 객체여서 클래스로 문자가 써있으면 문자열로 선언하는데 배열 같은 경우는 Gson으로 파싱 즉 JSON 문자열을 해석해서 자바 객체로 만드는 과정을 Gson이 해주게끔 처리해야함

- 생각해보기
- JSON 포맷에서는 객체의 속성이 가지는 값으로 다시 객체를 넣을 수 있는데 객체 안에 객체를 넣고 또 그 객체 안에 객체를 넣을 수 있는 걸까요?
- 가능합니다 다만 그렇게 하면 코드가 복잡해질 수 있음
- JSON 포맷에서는 배열 안에 들어있는 객체의 속성이 가지는 값으로 다시 배열을 넣을 수 있는 걸까요?
- 가능은 할 것 같지만 이해하고 보는데 어려울 수 있을 것 같음

### GSON 사용하기
- dailyBoxOfficeList는 대괄호 즉 배열로 되어 있는데 이것은 GSON으로 변환시 리스트는 ArrayList로 리스트 형태를 만들어주면 됨 
<img src="https://user-images.githubusercontent.com/32586985/91247486-5757d380-e78d-11ea-8e88-f1be3e4e961b.PNG">
<img src="https://user-images.githubusercontent.com/32586985/91247507-6048a500-e78d-11ea-885b-17c35a259987.PNG">
<img src="https://user-images.githubusercontent.com/32586985/91247519-676fb300-e78d-11ea-92f0-4616ebb4e125.PNG">

- JSON으로 받은 데이터를 확인하여 받기 위해서 위와 같이 순서대로 클래스를 만들어서 값마다 해당하게 정의함

<img src="https://user-images.githubusercontent.com/32586985/91247535-722a4800-e78d-11ea-866a-4afcc69ce5bf.PNG">

- Gson을 사용하는데 미리 클래스로 정의를 하고 클래스에는 JSON 포맷에 맞게 JSON 속성에 맞게 속성 이름을 변수명으로 바꿔주고 그 값의 타입을 앞에 만들어주고 클래스를 다 만든 다음에 Gson을 객체로 생성한 후에 해당 내용을 응답 받아서 파싱하여서 클래스에 사용하게끔 쓰게함

<img src="https://user-images.githubusercontent.com/32586985/91247557-8110fa80-e78d-11ea-976c-18e992e01a40.PNG">

- Gson으로 JSON 문자열이 자바 객체로 만들어짐
- Volley를 이용해 웹서버로부터 JSON 응답을 받았다면 Gson을 이용해 자바 객체로 바꾸고 그 객체 안에 들어있는 데이터를 사용함

- 생각해보기
- JSON 문자열을 직접 파싱하는 코드를 만드는 경우와 Gson을 사용하는 경우를 비교하면 코드 양이 얼마나 차이날까요?
- Gson을 사용하지 않으면 문자열을 일일이 다 이게 몇 번째고 캐릭터가 몇 번째이면 JSON 문자열 자체를 하나하나 입력해야하고 메인에서 처리해야 할 양이나 따로 만들어서 처리할 양이 많아지지만 Gson을 이용하면 해당하는 클래스만 따로 만들고 Gson에 객체를 만들어서 간단하게 해당하는 부분에 대해서 받아서 처리할 수 있게 하여 훨씬 코드가 줄어들 수 있다
- JSON 문자열에서 배열 안에 배열이 들어가는 경우에는 자바 클래스를 정의할 때 많이 복잡해질까요?
- 그것에 맞춰서 ArrayList로 선언해서 처리한다면 생각보다 많이 복잡할 것 같진 않습니다

